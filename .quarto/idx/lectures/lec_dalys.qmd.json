{"title":"Modeling DALYs in Amua","markdown":{"yaml":{"title":"Modeling DALYs in Amua","format":{"revealjs":{"theme":"slides.scss","incremental":false,"slide-number":true,"logo":"../vchem.png","html-math-method":"katex","transition":"fade","background-transition":"fade","highlight-style":"ayu-mirage","footer":"[Back to Website](../index.html)\n"}},"editor_options":{"chunk_output_type":"console"},"editor":{"markdown":{"wrap":72}},"bibliography":"../references_daly.bib"},"headingText":"Learning Objectives","containsRefs":false,"markdown":"\n\n```{r}\n#knitr::purl(here::here(\"modeling-dalys_harvard-2024.qmd\"))\n```\n\n\n- Review of DALY health outcomes\n- Tips and tricks for modeling DALYs in Amua\n\n# Overview of DALY Outcomes \n\n## Common Outcomes\n\n::: incremental\n1.  Occupancy-based payoffs:\n\n-   Utility/DALY weight applied for a time period / step.\n-   Treatment/disease cost per time period / step.\n\n2.  Transition-based payoffs:\n\n-   One-time event-based cost (e.g., disease-related death, initial Dx,\n    etc.).\n-   One-time health outcome (e.g., years of life lost to premature\n    mortality)\n:::\n\n## Disability-Adjusted Life Years (DALYs)\n\n::: incremental\n-   Reflect both occupancy- and transition-based payoffs.\n-   There's also *very* little guidance on how to structure a decision\n    model for DALY outcomes.\n-   We'll show you how today!\n:::\n\n## DALYs\n\n::: incremental\n-   Origin story: Global Burden of Disease Study\n\n-   Deliberately a measure of health, not welfare/utility\n\n-   Similar to QALYs, two dimensions of interest:\n\n    -   Length of life (differences in life expectancy)\n\n    -   Quality of life (measured by disability weight)\n:::\n\n## DALYs\n\n[![](images/DALY_disability_affected_life_year_infographic.svg){width=\"1500\"}](https://en.wikipedia.org/wiki/Disability-adjusted_life_year)\n\n::: fragment\n**DALYs = YLL + YLD**\n\n-   YLL (Years of Life Lost)\n-   YLD (Years Lived with Disability)\n:::\n\n\n## Years of Life Lost to Disease\n\nFor a given condition $c$,\n\n$$\nYLD(c) = D_c \\cdot L_c\n$$\n\n::: incremental\n-   $D_c$ is the condition's disability weight\n-   $L_c$ is the time lived with the disease.\n:::\n\n## [Years of Life Lost to Premature Mortality]{.r-fit-text}\n\n::: incremental\n-   YLL are defined by by a \"loss function.\"\n-   Drawn from a reference life table, indicating remaining life\n    expectancy at age $a$.\n-   $$\n    YLL(a)= Ex(a)\n    $$\n:::\n\n## [Years of Life Lost to Premature Mortality]{.r-fit-text}\n\n::: incremental\n\n\n:::\n\n## DALYs\n\n$$\nDALY(c,a) = YLD(c) + YLL(a)\n$$\n\n## Evolution of DALY Calculations\n\n::: incremental\n-   **Historical Practice:** Initial GBD studies applied age-weighting\n    and 3% annual time discounting.\n-   **Changes Post-2010:** Discontinuation of these practices for a more\n    descriptive DALY measure.\n:::\n\n## Current Discounting Practices\n\n::: incremental\n-   **WHO-CHOICE:** Time discounting of health outcomes.\n:::\n\n## Takeaways\n\n::: incremental\n-   Modeling DALYs in Amua is straightforward if you don't use\n    discounting.\n    -   For YLDs, use disability weight like you would a utility weight.\n    -   For YLLs, use one-time \"cost\" of remaining life expectancy.\n        - YLL = `tbl_reference_life_table[initial_age + t, 1]`\n:::\n\n## Takeaways\n\n::: incremental\n-   But if you do need to discount ...\n    -   You're going to see some math expressions that take care of\n        discounting for YLL outcomes.\n    -   This math adds some complexity but not much insight, so I'll\n        gloss over it a bit\n    -   We'll provide you the formulas to use here and in the .amua\n        model file.\n:::\n\n## Mathematical Formulation for DALYs in AMUA\n\n-  $YLD(c) = D_c$.\n\n-  $YLL(a,t)=  Ex(a)\\exp(-\\ln(1+r)*t)$.\n    - $a$ is the time of death\n    -   $r$ is the discount rate you're using in the model (e.g.,\n    3%).\n    \n    - $t$ is the cycle number at which premature death occurs. \n\n## Mathematical Formulation for DALYs in AMUA\n\n-  $YLD(c)=$ `dw_c`.\n\n-   $YLL(a,t)=$ `tbl_ref_lt[initial_age+t,1]` $*\\exp(-\\log(1+$ `r_disc` $)*$ `t`$)$. \n\n\n\n## Overview of Decision Problem\n\n::: incremental\n-   Progressive disease model (from case study)\n-   Focus only on cohort of individuals who develop mild disease.\n-   Follow until death (from disease-related or other causes)\n:::\n\n## Overview of Decision Problem\n\n::: incremental\n-   Major difference from case study: can ignore Healthy state.\n-   Strategies: Status quo, prevention, treatment\n:::\n\n# Methods: Structuring the Model {background=\"#43464B\"}\n\n## State Transition Diagram {.nostretch}\n\n![](images/clipboard-2723911892.png){fig-align=\"center\" width=\"800\"}\n\n## Defining Outcomes in Amua\n\n::: incremental\n-   YLD: New Outcome. Use disability weights instead of utility weights!\n-   YLL: One-time \"event\" at time of death from disease.\n    -   \"Cost\": present value of remaining life expectancy at age of death in\n        the model.\n    -   Intuition: we penalize premature death from disease using the\n        remaining life expectancy at the age in which the person dies.\n- Need to also define the discount rate as a parameter `r_disc`\n:::\n\n## Interactive Amua Session\n\n## Occupancy-Based Payoff: YLD\n\n-   YLD is an \"occupancy-based\" payoff (i.e., YLD increments by\n    disability weight for each cycle in that health state).\n    -   Add `dw_mild` = 0.08\n    -   Add `dw_progressive` = 0.15\n    -   Add `dw_progressive_treated` = 0.13\n-   Mild disease state: `dw_mild`\n-   Progressive disease state: `dw_progressive`\n\n## Transition-Based Payoff: YLL\n\n-   Remaining life expectancies are drawn from the reference life table,\n    or from an endogenous life table.\n-   Import reference life table as lookup table---just like we did with\n    background mortality, etc.\n-   Remember to use the \"Truncate\" option because the life table may not\n    extend to the maximum age in the model.\n\n::: footer\nAdditional slides below (hit down button).\n:::\n\n## Life Expectancy & YLL\n\n::: incremental\n-   **Contextual Choices:** Remaining life expectancy values may vary by\n    research context [@anand2019].\n-   **Historical Method:** GBD uses an *exogenous* life table\n    approximating maximum human lifespan.\n-   **Alternatives:** *Endogenous* tables or models may be preferred in\n    certain cases.\n:::\n\n## Exogenous vs. Endogenous Life Tables\n\n::: incremental\n-   **Distinction:** Source of life expectancy values (external vs.\n    internal).\n-   **Exogenous:** Independent mortality risks, using GBD's reference\n    table.\n-   **Endogenous:** Specific to the population's mortality risks and\n    health states.\n:::\n\n## Incremental CEA\n\n- ICERs are based on cost per DALYs *averted*\n- Must export expected cost and DALY outcomes, then do ICER calculations outside Amua (e.g., Excel)\n- Alternative: define YLL and YLD outcomes as their negative values. \n  - CEA will work, but expected values will be negative. \n\n# Thanks!\n\n::: vertical-center-slide\n::: {.callout-note appearance=\"minimal\"}\nDraft manuscript (with R code) available online at\n<https://graveja0.github.io/dalys/>\n:::\n\n![](media/adobe-express-qr-code.png){fig-align=\"center\" width=\"25%\"}\n:::\n\n# References\n","srcMarkdownNoYaml":"\n\n```{r}\n#knitr::purl(here::here(\"modeling-dalys_harvard-2024.qmd\"))\n```\n\n## Learning Objectives\n\n- Review of DALY health outcomes\n- Tips and tricks for modeling DALYs in Amua\n\n# Overview of DALY Outcomes \n\n## Common Outcomes\n\n::: incremental\n1.  Occupancy-based payoffs:\n\n-   Utility/DALY weight applied for a time period / step.\n-   Treatment/disease cost per time period / step.\n\n2.  Transition-based payoffs:\n\n-   One-time event-based cost (e.g., disease-related death, initial Dx,\n    etc.).\n-   One-time health outcome (e.g., years of life lost to premature\n    mortality)\n:::\n\n## Disability-Adjusted Life Years (DALYs)\n\n::: incremental\n-   Reflect both occupancy- and transition-based payoffs.\n-   There's also *very* little guidance on how to structure a decision\n    model for DALY outcomes.\n-   We'll show you how today!\n:::\n\n## DALYs\n\n::: incremental\n-   Origin story: Global Burden of Disease Study\n\n-   Deliberately a measure of health, not welfare/utility\n\n-   Similar to QALYs, two dimensions of interest:\n\n    -   Length of life (differences in life expectancy)\n\n    -   Quality of life (measured by disability weight)\n:::\n\n## DALYs\n\n[![](images/DALY_disability_affected_life_year_infographic.svg){width=\"1500\"}](https://en.wikipedia.org/wiki/Disability-adjusted_life_year)\n\n::: fragment\n**DALYs = YLL + YLD**\n\n-   YLL (Years of Life Lost)\n-   YLD (Years Lived with Disability)\n:::\n\n\n## Years of Life Lost to Disease\n\nFor a given condition $c$,\n\n$$\nYLD(c) = D_c \\cdot L_c\n$$\n\n::: incremental\n-   $D_c$ is the condition's disability weight\n-   $L_c$ is the time lived with the disease.\n:::\n\n## [Years of Life Lost to Premature Mortality]{.r-fit-text}\n\n::: incremental\n-   YLL are defined by by a \"loss function.\"\n-   Drawn from a reference life table, indicating remaining life\n    expectancy at age $a$.\n-   $$\n    YLL(a)= Ex(a)\n    $$\n:::\n\n## [Years of Life Lost to Premature Mortality]{.r-fit-text}\n\n::: incremental\n\n\n:::\n\n## DALYs\n\n$$\nDALY(c,a) = YLD(c) + YLL(a)\n$$\n\n## Evolution of DALY Calculations\n\n::: incremental\n-   **Historical Practice:** Initial GBD studies applied age-weighting\n    and 3% annual time discounting.\n-   **Changes Post-2010:** Discontinuation of these practices for a more\n    descriptive DALY measure.\n:::\n\n## Current Discounting Practices\n\n::: incremental\n-   **WHO-CHOICE:** Time discounting of health outcomes.\n:::\n\n## Takeaways\n\n::: incremental\n-   Modeling DALYs in Amua is straightforward if you don't use\n    discounting.\n    -   For YLDs, use disability weight like you would a utility weight.\n    -   For YLLs, use one-time \"cost\" of remaining life expectancy.\n        - YLL = `tbl_reference_life_table[initial_age + t, 1]`\n:::\n\n## Takeaways\n\n::: incremental\n-   But if you do need to discount ...\n    -   You're going to see some math expressions that take care of\n        discounting for YLL outcomes.\n    -   This math adds some complexity but not much insight, so I'll\n        gloss over it a bit\n    -   We'll provide you the formulas to use here and in the .amua\n        model file.\n:::\n\n## Mathematical Formulation for DALYs in AMUA\n\n-  $YLD(c) = D_c$.\n\n-  $YLL(a,t)=  Ex(a)\\exp(-\\ln(1+r)*t)$.\n    - $a$ is the time of death\n    -   $r$ is the discount rate you're using in the model (e.g.,\n    3%).\n    \n    - $t$ is the cycle number at which premature death occurs. \n\n## Mathematical Formulation for DALYs in AMUA\n\n-  $YLD(c)=$ `dw_c`.\n\n-   $YLL(a,t)=$ `tbl_ref_lt[initial_age+t,1]` $*\\exp(-\\log(1+$ `r_disc` $)*$ `t`$)$. \n\n\n\n## Overview of Decision Problem\n\n::: incremental\n-   Progressive disease model (from case study)\n-   Focus only on cohort of individuals who develop mild disease.\n-   Follow until death (from disease-related or other causes)\n:::\n\n## Overview of Decision Problem\n\n::: incremental\n-   Major difference from case study: can ignore Healthy state.\n-   Strategies: Status quo, prevention, treatment\n:::\n\n# Methods: Structuring the Model {background=\"#43464B\"}\n\n## State Transition Diagram {.nostretch}\n\n![](images/clipboard-2723911892.png){fig-align=\"center\" width=\"800\"}\n\n## Defining Outcomes in Amua\n\n::: incremental\n-   YLD: New Outcome. Use disability weights instead of utility weights!\n-   YLL: One-time \"event\" at time of death from disease.\n    -   \"Cost\": present value of remaining life expectancy at age of death in\n        the model.\n    -   Intuition: we penalize premature death from disease using the\n        remaining life expectancy at the age in which the person dies.\n- Need to also define the discount rate as a parameter `r_disc`\n:::\n\n## Interactive Amua Session\n\n## Occupancy-Based Payoff: YLD\n\n-   YLD is an \"occupancy-based\" payoff (i.e., YLD increments by\n    disability weight for each cycle in that health state).\n    -   Add `dw_mild` = 0.08\n    -   Add `dw_progressive` = 0.15\n    -   Add `dw_progressive_treated` = 0.13\n-   Mild disease state: `dw_mild`\n-   Progressive disease state: `dw_progressive`\n\n## Transition-Based Payoff: YLL\n\n-   Remaining life expectancies are drawn from the reference life table,\n    or from an endogenous life table.\n-   Import reference life table as lookup table---just like we did with\n    background mortality, etc.\n-   Remember to use the \"Truncate\" option because the life table may not\n    extend to the maximum age in the model.\n\n::: footer\nAdditional slides below (hit down button).\n:::\n\n## Life Expectancy & YLL\n\n::: incremental\n-   **Contextual Choices:** Remaining life expectancy values may vary by\n    research context [@anand2019].\n-   **Historical Method:** GBD uses an *exogenous* life table\n    approximating maximum human lifespan.\n-   **Alternatives:** *Endogenous* tables or models may be preferred in\n    certain cases.\n:::\n\n## Exogenous vs. Endogenous Life Tables\n\n::: incremental\n-   **Distinction:** Source of life expectancy values (external vs.\n    internal).\n-   **Exogenous:** Independent mortality risks, using GBD's reference\n    table.\n-   **Endogenous:** Specific to the population's mortality risks and\n    health states.\n:::\n\n## Incremental CEA\n\n- ICERs are based on cost per DALYs *averted*\n- Must export expected cost and DALY outcomes, then do ICER calculations outside Amua (e.g., Excel)\n- Alternative: define YLL and YLD outcomes as their negative values. \n  - CEA will work, but expected values will be negative. \n\n# Thanks!\n\n::: vertical-center-slide\n::: {.callout-note appearance=\"minimal\"}\nDraft manuscript (with R code) available online at\n<https://graveja0.github.io/dalys/>\n:::\n\n![](media/adobe-express-qr-code.png){fig-align=\"center\" width=\"25%\"}\n:::\n\n# References\n"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":"katex","slide-level":2,"to":"revealjs","incremental":false,"highlight-style":"ayu-mirage","output-file":"lec_dalys.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.8.24","auto-stretch":true,"title":"Modeling DALYs in Amua","editor_options":{"chunk_output_type":"console"},"editor":{"markdown":{"wrap":72}},"bibliography":["../references_daly.bib"],"theme":"slides.scss","slideNumber":true,"logo":"../vchem.png","transition":"fade","backgroundTransition":"fade","footer":"[Back to Website](../index.html)\n"}}},"projectFormats":["html"]}